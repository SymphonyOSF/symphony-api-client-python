@Library(['sym-pipeline']) _

node {
    withCredentials([
        // TWINE_USERNAME/TWINE_PASSWORD should be replaced with credentials
    ]) {

        withEnv([
                "GIT_BRANCH=$PARAM_BUILD_BRANCH",
                "GIT_ORG=$PARAM_REPO_OWNER",
                "TWINE_USERNAME=$PARAM_TWINE_USERNAME",
                "TWINE_PASSWORD=$PARAM_TWINE_PASSWORD",
                "GIT_REPO=symphony-api-client-python"
        ]) {
            stage('Git Checkout') {
                gitCheckout()
            }

            stage('Publish legacy BDK project') {
                withDockerContainer('python:3.9') {
                    sh './jenkins/release.sh'
                }
            }
        }
    }
}
